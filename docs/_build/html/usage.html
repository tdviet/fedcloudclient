

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; fedcloudclient  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=8897013c" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using FedCloud client in Python" href="development.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            fedcloudclient
              <img src="_static/fedcloudclient-logo-non-transparent-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication-options">Authentication Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shell-completion">Shell completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-help-command">fedcloud –help command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-token-commands">fedcloud token commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-endpoint-commands">fedcloud endpoint commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-site-commands">fedcloud site commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-select-commands">fedcloud select commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-openstack-commands">fedcloud openstack commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-config-commands">fedcloud config commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-secret-commands">fedcloud secret commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Using FedCloud client in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Using FedCloud client in scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">fedcloudclient API references</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat.html">Cheat sheet</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fedcloudclient</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h1>
<p><strong>FedCloud client</strong> has the following main groups of commands:</p>
<ul class="simple">
<li><p><strong>“fedcloud config”</strong> for handling fedcloudclient configuration,</p></li>
<li><p><strong>“fedcloud token”</strong> for interactions with EGI Check-in and access tokens,</p></li>
<li><p><strong>“fedcloud endpoint”</strong> for interactions with GOCDB (and site endpoints according to GOCDB),</p></li>
<li><p><strong>“fedcloud site”</strong> for manipulations with site configurations,</p></li>
<li><p><strong>“fedcloud openstack”</strong> or <strong>“fedcloud openstack-int”</strong> for performing OpenStack commands on sites,</p></li>
<li><p><strong>“fedcloud secret”</strong> for accessing secrets in
<a class="reference external" href="https://vault.docs.fedcloud.eu/index.html">Secret management service</a>,</p></li>
<li><p><strong>“fedcloud auth”</strong>  is used to check the validity of access tokens and authentication credential,</p></li>
</ul>
<section id="authentication-options">
<h2>Authentication Options<a class="headerlink" href="#authentication-options" title="Link to this heading"></a></h2>
<p><strong>FedCloud</strong> commands require access tokens for authentication. Users have multiple options for providing these tokens:</p>
<ul>
<li><p><strong>Direct access token</strong>: Use the <code class="docutils literal notranslate"><span class="pre">--oidc-access-token</span></code> option to provide an access token directly. You can retrieve this token from the environment variable <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_OIDC_ACCESS_TOKEN</span></code>, or pass it explicitly, e.g.:</p>
<p><code class="docutils literal notranslate"><span class="pre">fedcloud</span> <span class="pre">token</span> <span class="pre">check</span> <span class="pre">--oidc-access-token</span> <span class="pre">&lt;ACCESS_TOKEN&gt;</span></code></p>
</li>
<li><p><strong>OIDC agent</strong>: Use the <code class="docutils literal notranslate"><span class="pre">--oidc-agent-account</span></code> option to integrate with <a class="reference external" href="https://indigo-dc.gitbooks.io/oidc-agent/">oidc-agent</a>. For example, check token validity with:</p>
<p><code class="docutils literal notranslate"><span class="pre">fedcloud</span> <span class="pre">token</span> <span class="pre">check</span> <span class="pre">--oidc-agent-account</span> <span class="pre">&lt;NAME_OF_USER_FOR_OIDC_AGENT&gt;</span></code></p>
<p>To use this method, follow the instructions at <a class="reference external" href="https://indigo-dc.gitbook.io/oidc-agent/user/oidc-gen/provider/egi/">oidc-agent for EGI</a> to register a client, then pass the client (account) name to the FedCloud client.</p>
</li>
<li><p><strong>Mytoken</strong>: Use the <code class="docutils literal notranslate"><span class="pre">--mytoken</span></code> option to authenticate with a token from the <a class="reference external" href="https://mytoken.data.kit.edu/">Mytoken service</a>. To check token validity:</p>
<p><code class="docutils literal notranslate"><span class="pre">fedcloud</span> <span class="pre">token</span> <span class="pre">check</span> <span class="pre">--mytoken</span> <span class="pre">&lt;TOKEN_FOR_MYTOKEN&gt;</span></code></p>
<p>When creating a Mytoken, ensure you select <strong>“Allows obtaining OpenID Connect Access Tokens”</strong>. You may also use the <code class="docutils literal notranslate"><span class="pre">--mytoken-server</span></code> option to authenticate with a specific Mytoken server.</p>
</li>
</ul>
<p>Alternatively, you can obtain tokens using the <a class="reference external" href="https://aai.egi.eu/token">EGI Check-in Token Portal</a>, which provides all necessary information for EGI Check-in users.</p>
<p>In addition to command-line options, environment variables can be used for passing tokens, as summarized in the table below (not shown here).</p>
<p>By default, the protocol used is <code class="docutils literal notranslate"><span class="pre">openid</span></code>. This can be changed using the <code class="docutils literal notranslate"><span class="pre">--os-protocol</span></code> option. Note that some sites may have a fixed protocol defined in their site configuration (e.g., <code class="docutils literal notranslate"><span class="pre">oidc</span></code> for INFN-CLOUD-BARI).</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>Display the current configuration of <em>fedcloud</em> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud config show
</pre></div>
</div>
<p>This will show a list of configuration parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>site</p></td>
<td><p>IISAS-FedCloud</p></td>
</tr>
<tr class="row-odd"><td><p>vo</p></td>
<td><p>vo.access.egi.eu</p></td>
</tr>
<tr class="row-even"><td><p>site_list_url</p></td>
<td><p><a class="reference external" href="https://raw.githubusercontent.com/tdviet/fedcloudclient/master/config/sites.yaml">https://raw.githubusercontent.com/tdviet/fedcloudclient/master/config/sites.yaml</a></p></td>
</tr>
<tr class="row-odd"><td><p>site_dir</p></td>
<td><p>${HOME}/.config/fedcloud/site-config</p></td>
</tr>
<tr class="row-even"><td><p>oidc_url</p></td>
<td><p><a class="reference external" href="https://aai.egi.eu/auth/realms/egi">https://aai.egi.eu/auth/realms/egi</a></p></td>
</tr>
<tr class="row-odd"><td><p>gocdb_public_url</p></td>
<td><p><a class="reference external" href="https://goc.egi.eu/gocdbpi/public/">https://goc.egi.eu/gocdbpi/public/</a></p></td>
</tr>
<tr class="row-even"><td><p>gocdb_service_group</p></td>
<td><p>org.openstack.nova</p></td>
</tr>
<tr class="row-odd"><td><p>vault_endpoint</p></td>
<td><p><a class="reference external" href="https://vault.services.fedcloud.eu:8200">https://vault.services.fedcloud.eu:8200</a></p></td>
</tr>
<tr class="row-even"><td><p>vault_role</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>vault_mount_point</p></td>
<td><p>/secrets/</p></td>
</tr>
<tr class="row-even"><td><p>vault_locker_mount_point</p></td>
<td><p>/v1/cubbyhole/</p></td>
</tr>
<tr class="row-odd"><td><p>vault_salt</p></td>
<td><p>fedcloud_salt</p></td>
</tr>
<tr class="row-even"><td><p>log_file</p></td>
<td><p>${HOME}/.config/fedcloud/logs/fedcloud.log</p></td>
</tr>
<tr class="row-odd"><td><p>log_level</p></td>
<td><p>DEBUG</p></td>
</tr>
<tr class="row-even"><td><p>log_config_file</p></td>
<td><p>${HOME}/.config/fedcloud/logging.conf</p></td>
</tr>
<tr class="row-odd"><td><p>requests_cert_file</p></td>
<td><p>${HOME}/.config/fedcloud/cert/certs.pem</p></td>
</tr>
<tr class="row-even"><td><p>oidc_agent_account</p></td>
<td><p>egi</p></td>
</tr>
<tr class="row-odd"><td><p>min_access_token_time</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-even"><td><p>mytoken_server</p></td>
<td><p><a class="reference external" href="https://mytoken.data.kit.edu">https://mytoken.data.kit.edu</a></p></td>
</tr>
<tr class="row-odd"><td><p>os_protocol</p></td>
<td><p>openid</p></td>
</tr>
<tr class="row-even"><td><p>os_auth_type</p></td>
<td><p>v3oidcaccesstoken</p></td>
</tr>
<tr class="row-odd"><td><p>os_identity_provider</p></td>
<td><p>egi.eu</p></td>
</tr>
<tr class="row-even"><td><p>_MIN_ACCESS_TOKEN_TIME</p></td>
<td><p>30</p></td>
</tr>
</tbody>
</table>
<p>The <strong>FedCloud client</strong> supports multiple types of configuration:</p>
<ul class="simple">
<li><p><strong>Default settings</strong> – accessible using <strong>``DEFAULT_SETTINGS``</strong>, these are the built-in default values.</p></li>
<li><p><strong>Local environment settings</strong> – custom configuration values defined in the environment and loaded via <strong>``env_config``</strong>.</p></li>
<li><p><strong>Saved configuration settings</strong> – user-defined settings stored in a JSON file, accessible via <strong>``saved_config``</strong>.</p></li>
</ul>
<p>For example, to print the environment configuration, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud config show --source env_config
</pre></div>
</div>
<p>This command shows, for instance, the following output:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>oidc_agent_account</p></td>
<td><p>&lt;NAME_OF_USER&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
<p>The <em>fedcloud</em> configuration can be saved to a file using the following command</p>
<dl class="simple">
<dt>::</dt><dd><p>$ fedcloud config create</p>
</dd>
</dl>
<p>By default, the configuration file is saved to <strong>${HOME}/.config/fedcloud/config.yaml</strong>,
but this location can be changed using the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud config create --config-file /path/to/file.yaml
</pre></div>
</div>
<section id="using-environment-variables-and-configuration-priorities">
<h3>Using Environment Variables and Configuration Priorities<a class="headerlink" href="#using-environment-variables-and-configuration-priorities" title="Link to this heading"></a></h3>
<p>It is also possible to use the <em>FEDCLOUD_CONFIG_FILE</em> environment variable instead of the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option in the command line.
This allows users to manage and switch between multiple configuration files—one per project—each with its own settings.</p>
<p>The <em>fedcloud</em> client supports configuration from multiple sources, in the following order of priority (highest to lowest):</p>
<ol class="arabic simple">
<li><p><strong>Command-line options</strong> – override all other settings.
Example: <code class="docutils literal notranslate"><span class="pre">--site</span> <span class="pre">IISAS-FedCloud</span></code></p></li>
<li><p><strong>Environment variables</strong> – must begin with the prefix <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_</span></code>.
Example: <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_SITE=IISAS-FedCloud</span></code></p></li>
<li><p><strong>Configuration file</strong> – typically stored as <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>.
Example: the <code class="docutils literal notranslate"><span class="pre">site</span></code> setting in <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code></p></li>
<li><p><strong>Default configuration</strong> – hardcoded defaults (lowest priority).
See the <a class="reference external" href="https://github.com/jaro221/fedcloudclient">source code</a> for details.</p></li>
</ol>
<p>The priority order is important:
default values are overridden by the configuration file,
which is overridden by environment variables,
which are in turn overridden by command-line options.</p>
<p>For example, the default configuration includes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">site</span> <span class="pre">=</span> <span class="pre">IISAS-FedCloud</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vo</span> <span class="pre">=</span> <span class="pre">vo.access.egi.eu</span></code></p></li>
</ul>
<p>These values can be changed using any of the higher-priority methods. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud openstack --vo training.egi.eu --site IFCA-LCG2 server list
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export FEDCLOUD_VO=training.egi.eu
$ export FEDCLOUD_SITE=IFCA-LCG2
$ fedcloud openstack server list
</pre></div>
</div>
</section>
<section id="consistent-parameter-naming">
<h3>Consistent Parameter Naming<a class="headerlink" href="#consistent-parameter-naming" title="Link to this heading"></a></h3>
<p>Note the consistent naming convention for configuration parameters across different sources. For example, the same parameter is represented as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--access_token</span></code> in the <strong>command-line</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FEDCLOUD_ACCESS_TOKEN</span></code> as an <strong>environment variable</strong></p></li>
</ul>
<p>All configuration parameters follow this consistent mapping across command-line options, environment variables, and configuration files.</p>
</section>
<section id="additional-configurable-parameters">
<h3>Additional Configurable Parameters<a class="headerlink" href="#additional-configurable-parameters" title="Link to this heading"></a></h3>
<p>In addition to <code class="docutils literal notranslate"><span class="pre">oidc_agent_account</span></code>, the following parameters can also be configured in the same way:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">site</span></code> – the OpenStack site to target</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vo</span></code> – the Virtual Organisation (VO)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_in_url</span></code> – the EGI Check-in OIDC endpoint</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client_id</span></code> – the OIDC client ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scopes</span></code> – requested OIDC scopes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">access_token</span></code> – manually provided access token</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_format</span></code> – format of output, e.g., <code class="docutils literal notranslate"><span class="pre">table</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code>, or <code class="docutils literal notranslate"><span class="pre">yaml</span></code></p></li>
</ul>
<p>These parameters can be specified via:</p>
<ul class="simple">
<li><p>command-line options (e.g., <code class="docutils literal notranslate"><span class="pre">--site</span></code>, <code class="docutils literal notranslate"><span class="pre">--vo</span></code>),</p></li>
<li><p>environment variables (e.g., <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_SITE</span></code>, <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_VO</span></code>), or</p></li>
<li><p>configuration files (e.g., <code class="docutils literal notranslate"><span class="pre">site:</span> <span class="pre">IISAS-FedCloud</span></code> in <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>).</p></li>
</ul>
<p>This design allows flexible and convenient configuration for various usage scenarios.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Environment variable</p></th>
<th class="head"><p>Command-line option</p></th>
<th class="head"><p>Configuration parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FEDCLOUD_OIDC_ACCESS_TOKEN</p></td>
<td><p>–oidc-access-token</p></td>
<td><p>Not implemented</p></td>
</tr>
<tr class="row-odd"><td><p>Not implemented</p></td>
<td><p>–mytoken</p></td>
<td><p>mytoken</p></td>
</tr>
<tr class="row-even"><td><p>Not implemented</p></td>
<td><p>–oidc-agent-account</p></td>
<td><p>oidc_agent_account</p></td>
</tr>
</tbody>
</table>
<p>For convenience, it is recommended to set transient parameters—such as access tokens—via <strong>environment variables</strong>.
This simplifies the usage of <em>fedcloud</em> commands by avoiding the need to specify these parameters on the command line each time.</p>
</section>
</section>
<section id="shell-completion">
<h2>Shell completion<a class="headerlink" href="#shell-completion" title="Link to this heading"></a></h2>
<p>Shell completion for <em>fedcloud</em> command in <em>bash</em> can be activated by executing the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ eval &quot;$(_FEDCLOUD_COMPLETE=bash_source fedcloud)&quot;
</pre></div>
</div>
<p>The command above may affect responsiveness of the shell. For long work, it is recommended to copy the
<a class="reference external" href="https://github.com/tdviet/fedcloudclient/blob/master/examples/fedcloud_bash_completion.sh">fedcloud_bash_completion.sh script</a> to a local file, and
source it from ~/.bashrc. Refer <a class="reference external" href="https://click.palletsprojects.com/en/8.0.x/shell-completion/#enabling-completion">Click documentation</a> for a long explanation.</p>
<p>After enabling shell completion, press &lt;TAB&gt; twice for shell completion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site &lt;TAB&gt;&lt;TAB&gt;
env              list             save-config      show             show-project-id
</pre></div>
</div>
</section>
<section id="fedcloud-help-command">
<h2>fedcloud –help command<a class="headerlink" href="#fedcloud-help-command" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>“fedcloud –help”</strong> command will print help message. When using it in combination with other
commands, e.g. <strong>“fedcloud token –help”</strong>, <strong>“fedcloud token check –hep”</strong>, it will print list of options for the
corresponding commands</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud --help
Usage: fedcloud [OPTIONS] COMMAND [ARGS]...

Options:
  --help  Show this message and exit.

Commands:
  config         Managing fedcloud configurations
  endpoint       Obtain endpoint details and scoped tokens
  openstack      Execute OpenStack commands on site and VO
  openstack-int  Interactive OpenStack client on site and VO
  secret         Commands for accessing secret objects
  select         Select resources according to specification
  site           Obtain site configurations
  token          Get details of access token
</pre></div>
</div>
</section>
<section id="fedcloud-token-commands">
<h2>fedcloud token commands<a class="headerlink" href="#fedcloud-token-commands" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>``fedcloud token check``</strong> – Checks the expiration time of the configured access token,
allowing users to determine whether it needs to be refreshed.</p></li>
</ul>
<p>As mentioned earlier, the access token can be provided via the environment variable <code class="docutils literal notranslate"><span class="pre">FEDCLOUD_OIDC_ACCESS_TOKEN</span></code>.
For this reason, the <code class="docutils literal notranslate"><span class="pre">--oidc-access-token</span></code> option is not shown in all examples below, even though it may be required if the token is not set via environment variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud token check
</pre></div>
</div>
<p>Output is shown as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Access</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">valid</span> <span class="n">to</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span> <span class="mi">01</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span><span class="mi">39</span> <span class="n">UTC</span>
<span class="n">Access</span> <span class="n">token</span> <span class="n">expires</span> <span class="ow">in</span> <span class="mi">3571</span> <span class="n">seconds</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud token list-vos”</strong> : Print the list of VO memberships according to EGI Check-in</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud token list-vos
</pre></div>
</div>
<p>Sample output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eosc</span><span class="o">-</span><span class="n">synergy</span><span class="o">.</span><span class="n">eu</span>
<span class="n">fedcloud</span><span class="o">.</span><span class="n">egi</span><span class="o">.</span><span class="n">eu</span>
<span class="n">training</span><span class="o">.</span><span class="n">egi</span><span class="o">.</span><span class="n">eu</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud token issue”</strong> : Print the access_token</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud token issue
</pre></div>
</div>
<p>Sample output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">egwergwregrwegreg</span><span class="o">...</span>
</pre></div>
</div>
</section>
<section id="fedcloud-endpoint-commands">
<h2>fedcloud endpoint commands<a class="headerlink" href="#fedcloud-endpoint-commands" title="Link to this heading"></a></h2>
<p><strong>“fedcloud endpoint”</strong> commands are complementary part of the <strong>“fedcloud site”</strong> commands. Instead of using site
configurations defined in files saved in GitHub repository or local disk, the commands try to get site information
directly from GOCDB (Grid Operations Configuration Management Database) <a class="reference external" href="https://goc.egi.eu/">https://goc.egi.eu/</a> or make probe test on sites</p>
<ul class="simple">
<li><p><strong>“fedcloud endpoint list”</strong> : List of endpoints of sites defined in GOCDB.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint list
</pre></div>
</div>
<p>Sample output:</p>
<dl class="simple">
<dt>::</dt><dd><p>Site                type                URL
——————  ——————  ————————————————
IFCA-LCG2           org.openstack.nova  <a class="reference external" href="https://api.cloud.ifca.es:5000/v3/">https://api.cloud.ifca.es:5000/v3/</a>
IN2P3-IRES          org.openstack.nova  <a class="reference external" href="https://sbgcloud.in2p3.fr:5000/v3">https://sbgcloud.in2p3.fr:5000/v3</a>
…</p>
</dd>
</dl>
<ul class="simple">
<li><p><strong>“fedcloud endpoint projects –site &lt;SITE&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt;”</strong> : List of projects to which the owner
of the access token has access at the given site</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint projects --site IFCA-LCG2
id                                Name                        enabled    site
--------------------------------  --------------------------  ---------  ---------
2a7e2cd4b6dc4e609dd934964c1715c6  VO:demo.fedcloud.egi.eu     True       IFCA-LCG2
3b9754ad8c6046b4aec43ec21abe7d8c  VO:eosc-synergy.eu          True       IFCA-LCG2
...
</pre></div>
</div>
<p>If the site is set to <em>ALL_SITES</em>, or the argument <em>-a</em> is used, the command will show accessible projects from all sites of the EGI Federated Cloud.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>“fedcloud endpoint vos –site &lt;SITE&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt;”</strong><span class="classifier">List of Virtual Organisations (VOs)</span></dt><dd><p>to which the owner of the access token has access at the given site</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint vos --site IFCA-LCG2
VO                id                                Project name         enabled    site
----------------  --------------------------------  -------------------  ---------  ---------
vo.access.egi.eu  233f045cb1ff46842a15ebb33af69460  VO:vo.access.egi.eu  True       IFCA-LCG2
training.egi.eu   d340308880134d04294097524eace710  VO:training.egi.eu   True       IFCA-LCG2
...
</pre></div>
</div>
<p>If the site is set to <em>ALL_SITES</em>, or the argument <em>-a</em> is used, the command will show accessible VOs from all sites of the EGI Federated Cloud.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint vos -a
VO                   id                                Project name         enabled    site
-------------------  --------------------------------  -------------------  ---------  -----------------
vo.access.egi.eu     233f045cb1ff46842a15ebb33af69460  VO:vo.access.egi.eu  True       IFCA-LCG2
training.egi.eu      d340308880134d04294097524eace710  VO:training.egi.eu   True       IFCA-LCG2
vo.access.egi.eu     7101022b9ae74ed9ac1a574497279499  EGI_access           True       IN2P3-IRES
vo.access.egi.eu     5bbdb5c1e0b2bcbac29904f4ac22dcaa  vo_access_egi_eu     True       UNIV-LILLE
vo.access.egi.eu     4cab325ca8c2495bf2d4e8f230bcd51a  VO:vo.access.egi.eu  True       INFN-PADOVA-STACK
...
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud endpoint token –site &lt;SITE&gt; –project-id &lt;PROJECT&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt;”</strong> : Get
OpenStack keystone scoped token on the site for the project ID.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint token --site IFCA-LCG2 --project-id 3b9754ad8c6046b4aec43ec21abe7d8c
export FEDCLOUD_OS_TOKEN=&quot;eayeghjtjtj...&quot;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud endpoint env –site &lt;SITE&gt; –project-id &lt;PROJECT&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt;”</strong> : Print
environment variables for working with the project ID on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint env --site IFCA-LCG2 --project-id 3b9754ad8c6046b4aec43ec21abe7d8c
# environment for IFCA-LCG2
export FEDCLOUD_OS_AUTH_URL=&quot;https://api.cloud.ifca.es:5000/v3/&quot;
export FEDCLOUD_OS_AUTH_TYPE=&quot;v3oidcaccesstoken&quot;
export FEDCLOUD_OS_IDENTITY_PROVIDER=&quot;egi.eu&quot;
export FEDCLOUD_OS_PROTOCOL=&quot;openid&quot;
export FEDCLOUD_OS_ACCESS_TOKEN=&quot;...&quot;
</pre></div>
</div>
</section>
<section id="fedcloud-site-commands">
<h2>fedcloud site commands<a class="headerlink" href="#fedcloud-site-commands" title="Link to this heading"></a></h2>
<p><strong>“fedcloud site”</strong> commands will read site configurations and manipulate with them. If the local site configurations
exist at <em>~/.config/fedcloud/site-config/</em>, <strong>fedcloud</strong> will read them from there, otherwise the commands will read
from <a class="reference external" href="https://github.com/EGI-Foundation/fedcloud-catchall-operations/tree/master/sites">GitHub repository</a>.</p>
<p>By default, <strong>fedcloud</strong> does not save anything on local disk, users have to save the site configuration to local disk
explicitly via <strong>“fedcloud site save-config”</strong> command. The advantage of having local
site configurations, beside faster loading, is to give users ability to make customizations, e.g. add additional VOs,
remove sites they do not have access, and so on.</p>
<ul class="simple">
<li><p><strong>“fedcloud site save-config”</strong> : Read the default site configurations from GitHub
and save them to <em>~/.config/fedcloud/site-config/</em> local directory. The command will overwrite existing site configurations
in the local directory.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site save-config
Saving site configs to directory /home/viet/.config/fedcloud/site-config/
</pre></div>
</div>
<p>After saving site configurations, users can edit and customize them, e.g. remove inaccessible sites, add new
VOs and so on.</p>
<ul class="simple">
<li><p><strong>“fedcloud site list”</strong> : List of existing sites in the site configurations</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site list
100IT
BIFI
CESGA
...
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud site list –vo &lt;VO-name&gt;”</strong> : List all sites supporting a Virtual Organization</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site vo-list --vo vo.access.egi.eu
BIFI
CENI
CESGA-CLOUD
...
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud site show –site &lt;SITE&gt;”</strong> : Show configuration of the corresponding site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site show --site IISAS-FedCloud
endpoint: https://cloud.ui.savba.sk:5000/v3/
gocdb: IISAS-FedCloud
vos:
- auth:
    project_id: a22bbffb007745b2934bf308b0a4d186
  name: covid19.eosc-synergy.eu
- auth:
    project_id: 51f736d36ce34b9ebdf196cfcabd24ee
  name: eosc-synergy.eu
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud site show-project-id –site &lt;SITE&gt; –vo &lt;VO&gt;”</strong>: show the project ID of the VO on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site show-project-id --site IISAS-FedCloud --vo eosc-synergy.eu
export FEDCLOUD_OS_AUTH_URL=&quot;https://cloud.ui.savba.sk:5000/v3/&quot;
export FEDCLOUD_OS_PROJECT_ID=&quot;51f736d36ce34b9ebdf196cfcabd24ee&quot;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud site env –site &lt;SITE&gt; –vo &lt;VO&gt;”</strong>: set OpenStack environment variable for the VO on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site env --site IISAS-FedCloud --vo eosc-synergy.eu
export FEDCLOUD_OS_AUTH_URL=&quot;https://cloud.ui.savba.sk:5000/v3/&quot;
export FEDCLOUD_OS_AUTH_TYPE=&quot;v3oidcaccesstoken&quot;
export FEDCLOUD_OS_IDENTITY_PROVIDER=&quot;egi.eu&quot;
export FEDCLOUD_OS_PROTOCOL=&quot;openid&quot;
export FEDCLOUD_OS_PROJECT_ID=&quot;51f736d36ce34b9ebdf196cfcabd24ee&quot;
# Remember to set OS_ACCESS_TOKEN, e.g. :
# export FEDCLOUD_OS_ACCESS_TOKEN=`oidc-token egi`
</pre></div>
</div>
<p>The main differences between <em>“fedcloud endpoint env”</em> and <em>“fedcloud site env”</em> commands are that the second command
needs VO name as input parameter instead of project ID. The command may set also environment variable OS_ACCESS_TOKEN,
if access token is provided, otherwise it will print notification.</p>
</section>
<section id="fedcloud-select-commands">
<h2>fedcloud select commands<a class="headerlink" href="#fedcloud-select-commands" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>“fedcloud select flavor –site &lt;SITE&gt; –vo &lt;VO&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt; –flavor-specs &lt;flavor-specs&gt;”</strong> :
Select flavor according to the specification in <em>flavor-specs</em>. The specifications may be repeated,
e.g. <em>–flavor-specs “VCPUs==2” –flavor-specs “RAM&gt;=2048”</em>, or may be joined, e.g.
<em>–flavor-specs “VCPUs==2 &amp; Disk&gt;10”</em>. For frequently used specs, short-option alternatives are available, e.g.
<em>–vcpus 2</em> is equivalent to <em>–flavor-specs “VCPUs==2”</em>. The output is sorted, flavors using less resources
(in the order: GPUs, CPUs, RAM, Disk) are placed on the first places. Users can choose to print only the best-matched
flavor with <em>–output-format first</em> (suitable for scripting) or the full list of all matched flavors in list/YAML/JSON
format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select flavor --site IISAS-FedCloud --vo vo.access.egi.eu --flavor-specs &quot;RAM&gt;=2096&quot; --flavor-specs &quot;Disk &gt; 10&quot; --output-format list
m1.medium
m1.large
m1.xlarge
m1.huge
g1.c08r30-K20m
g1.c16r60-2xK20m
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud select image –site &lt;SITE&gt; –vo &lt;VO&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt; –image-specs &lt;image-specs&gt;”</strong> :
Select image according to the specification in <em>image-specs</em>. The specifications may be repeated,
e.g. <em>–image-specs “Name=~Ubuntu” –image-specs “Name=~’20.04’”</em>. The output is sorted, newest images
are placed on the first places. Users can choose to print only the best-matched
image with <em>–output-format first</em> (suitable for scripting) or the full list of all matched images in list/YAML/JSON
format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select image --site INFN-CATANIA-STACK --vo training.egi.eu --image-specs &quot;Name =~ Ubuntu&quot; --output-format list
TRAINING.EGI.EU Image for EGI Docker [Ubuntu/18.04/VirtualBox]
TRAINING.EGI.EU Image for EGI Ubuntu 20.04 [Ubuntu/20.04/VirtualBox]
</pre></div>
</div>
<ul class="simple">
<li><p><strong>“fedcloud select network –site &lt;SITE&gt; –vo &lt;VO&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt; –network-specs &lt;flavor-specs&gt;”</strong> :
Select network according to the specification in <em>network-specs</em>. User can choose to select only public or private
network, or both (default). The output is sorted in the order: public, shared,
private. Users can choose to print only the best-matched network with <em>–output-format first</em>
(suitable for scripting) or the full list of all matched networks in list/YAML/JSON format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select network --site IISAS-FedCloud --vo training.egi.eu --network-specs default --output-format list
public-network
private-network
</pre></div>
</div>
</section>
<section id="fedcloud-openstack-commands">
<h2>fedcloud openstack commands<a class="headerlink" href="#fedcloud-openstack-commands" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>“fedcloud openstack –site &lt;SITE&gt; –vo &lt;VO&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt; &lt;OPENSTACK_COMMAND&gt;”</strong> : Execute an
OpenStack command on the site and VO. Examples of OpenStack commands are <em>“image list”</em>, <em>“server list”</em> and can be used
with additional options for the commands, e.g. <em>“image list –long”</em>, <em>“server list –format json”</em>. The list of all
OpenStack commands, and their parameters/usages are available
<a class="reference external" href="https://docs.openstack.org/python-openstackclient/latest/cli/command-list.html">here</a>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud openstack image list --site IISAS-FedCloud --vo eosc-synergy.eu
Site: IISAS-FedCloud, VO: eosc-synergy.eu
+--------------------------------------+-------------------------------------------------+--------+
| ID                                   | Name                                            | Status |
+--------------------------------------+-------------------------------------------------+--------+
| 862d4ede-6a11-4227-8388-c94141a5dace | Image for EGI CentOS 7 [CentOS/7/VirtualBox]    | active |
...
</pre></div>
</div>
<p>If the site is <em>ALL_SITES</em>, the OpenStack command will be executed on all sites in EGI Federated Cloud.</p>
<ul class="simple">
<li><p><strong>“fedcloud openstack-int –site &lt;SITE&gt; –vo &lt;VO&gt; –oidc-access-token &lt;ACCESS_TOKEN&gt;”</strong> : Call OpenStack client without
command, so users can work with OpenStack site in interactive mode. This is useful when users need to perform multiple
commands successively. For example, users may need get list of images, list of flavors, list of networks before
creating a VM. OIDC authentication is done only once at the beginning, then the keystone token is cached and will
be used for successive commands without authentication via CheckIn again.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud openstack-int --site IISAS-FedCloud --vo eosc-synergy.eu
(openstack) image list
+--------------------------------------+-------------------------------------------------+--------+
| ID                                   | Name                                            | Status |
+--------------------------------------+-------------------------------------------------+--------+
| 862d4ede-6a11-4227-8388-c94141a5dace | Image for EGI CentOS 7 [CentOS/7/VirtualBox]    | active |
...
(openstack) flavor list
+--------------------------------------+-----------+-------+------+-----------+-------+-----------+
| ID                                   | Name      |   RAM | Disk | Ephemeral | VCPUs | Is Public |
+--------------------------------------+-----------+-------+------+-----------+-------+-----------+
| 5bd8397c-b97f-462d-9d2b-5b533844996c | m1.small  |  2048 |   10 |         0 |     1 | True      |
| df25f80f-ed19-4e0b-805e-d34620ba0334 | m1.medium |  4096 |   40 |         0 |     2 | True      |
...
(openstack)
</pre></div>
</div>
</section>
<section id="fedcloud-config-commands">
<h2>fedcloud config commands<a class="headerlink" href="#fedcloud-config-commands" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>“fedcloud config –config-file create”</strong> : Create default configuration file in default location for configuration file</p></li>
</ul>
</section>
<section id="fedcloud-secret-commands">
<h2>fedcloud secret commands<a class="headerlink" href="#fedcloud-secret-commands" title="Link to this heading"></a></h2>
<p>The <strong>“fedcloud secret”</strong> commands are described in details in the documentation of the
<a class="reference external" href="https://vault.docs.fedcloud.eu/usage.html">Secret management service</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="development.html" class="btn btn-neutral float-right" title="Using FedCloud client in Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, jaro221.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
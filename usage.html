<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; fedcloudclient  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using fedcloudclient in Python" href="development.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/fedcloudclient-logo-non-transparent-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shell-completion">Shell completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-help-command">fedcloud --help command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-token-commands">fedcloud token commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-endpoint-commands">fedcloud endpoint commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-ec3-commands">fedcloud ec3 commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-site-commands">fedcloud site commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-select-commands">fedcloud select commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fedcloud-openstack-commands">fedcloud openstack commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Using fedcloudclient in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Using fedcloudclient in scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="fedcloudclient.html">fedcloudclient API references</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat.html">Cheat sheet</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fedcloudclient</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Usage</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/tdviet/fedcloudclient/blob/master/docs/usage.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h1>
<p><strong>fedcloudclient</strong> has four groups of commands: <strong>&quot;fedcloud token&quot;</strong> for interactions with EGI Check-in and access tokens,
<strong>&quot;fedcloud endpoint&quot;</strong> for interactions with GOCDB (and site endpoints according to GOCDB), <strong>&quot;fedcloud site&quot;</strong> for
manipulations with site configurations, and <strong>&quot;fedcloud openstack&quot;</strong> or <strong>&quot;fedcloud openstack-int&quot;</strong> for performing
OpenStack commands on sites.</p>
<section id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline"></a></h2>
<p>Many <strong>fedcloud</strong> commands need access tokens for authentication. Users can choose whether to provide access tokens
directly (via option <em>&quot;--oidc-access-token&quot;</em>), or via oidc-agent (via option <em>&quot;--oidc-agent-account&quot;</em>), use refresh
tokens (must be provided together with Check-in client ID and secret) to generate access tokens on the fly. Therefore,
in most cases, the option <em>&quot;--oidc-access-token&quot;</em> can be replaced by the option <em>&quot;--oidc-agent-account&quot;</em>, or the
combination of <em>&quot;--oidc-refresh-token&quot;</em>, <em>&quot;--oidc-client-id&quot;</em> and <em>&quot;--oidc-client-secret&quot;</em>.</p>
<p>Users of EGI Check-in can get all information needed for obtaining refresh and access tokens from <a class="reference external" href="https://aai.egi.eu/fedcloud/">Check-in FedCloud
client</a>. For providing access token via <em>oidc-agent</em>, follow the instructions from
<a class="reference external" href="https://indigo-dc.gitbook.io/oidc-agent/user/oidc-gen/provider/egi/">oidc-agent</a> for registering a client, then
give the client name (account name in <em>oidc-agent</em>) to <em>fedcloudclient</em> via option <em>&quot;--oidc-agent-account&quot;</em>.</p>
<p>Refresh tokens have long lifetime (one year in EGI Check-in), so they must be properly protected. Exposing refresh
tokens via environment variables or command-line options is considered as insecure and will be disable in near
future in favor of using <em>oidc-agent</em>. If multiple methods of getting access tokens are given at the same time,
the client will try to get the tokens from the oidc-agent first, then from refresh tokens.</p>
<p>The default OIDC identity provider is EGI Check-in (<a class="reference external" href="https://aai.egi.eu/oidc">https://aai.egi.eu/oidc</a>). Users can set other OIDC identity
provider via option <em>&quot;--oidc-url&quot;</em>. Remember to set identity provider's name <em>&quot;--openstack-auth-provider&quot;</em> accordingly
for OpenStack commands.</p>
<p>The default protocol is <em>&quot;openid&quot;</em>. Users can change default protocol via option <em>&quot;--openstack-auth-protocol&quot;</em>. However,
sites may have protocol fixedly defined in site configuration, e.g. <em>&quot;oidc&quot;</em> for INFN-CLOUD-BARI.</p>
</section>
<section id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline"></a></h2>
<p>Most of fedcloud options, including options for tokens can be set via environment variables:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 34%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Environment variables</p></th>
<th class="head"><p>Command-line options</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OIDC_AGENT_ACCOUNT</p></td>
<td><p>--oidc-agent-account</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OIDC_ACCESS_TOKEN</p></td>
<td><p>--oidc-access-token</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OIDC_REFRESH_TOKEN</p></td>
<td><p>--oidc-refresh-token</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OIDC_CLIENT_ID</p></td>
<td><p>--oidc-client-id</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OIDC_CLIENT_SECRET</p></td>
<td><p>--oidc-client-secret</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OIDC_URL</p></td>
<td><p>--oidc-url</p></td>
<td><p><a class="reference external" href="https://aai.egi.eu/oidc">https://aai.egi.eu/oidc</a></p></td>
</tr>
<tr class="row-even"><td><p>OPENSTACK_AUTH_PROTOCOL</p></td>
<td><p>--openstack-auth-protocol</p></td>
<td><p>openid</p></td>
</tr>
<tr class="row-odd"><td><p>OPENSTACK_AUTH_PROVIDER</p></td>
<td><p>--openstack-auth-provider</p></td>
<td><p>egi.eu</p></td>
</tr>
<tr class="row-even"><td><p>OPENSTACK_AUTH_TYPE</p></td>
<td><p>--openstack-auth-type</p></td>
<td><p>v3oidcaccesstoken</p></td>
</tr>
<tr class="row-odd"><td><p>EGI_SITE</p></td>
<td><p>--site</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>EGI_VO</p></td>
<td><p>--vo</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>For convenience, always set the frequently used options like tokens via environment variables, that can save a lot of
time.</p>
</section>
<section id="shell-completion">
<h2>Shell completion<a class="headerlink" href="#shell-completion" title="Permalink to this headline"></a></h2>
<p>Shell completion for <em>fedcloud</em> command in <em>bash</em> can be activated by executing the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ eval &quot;$(_FEDCLOUD_COMPLETE=bash_source fedcloud)&quot;
</pre></div>
</div>
<p>The command above may affect responsiveness of the shell. For long work, it is recommended to copy the
<a class="reference external" href="https://github.com/tdviet/fedcloudclient/blob/master/examples/fedcloud_bash_completion.sh">fedcloud_bash_completion.sh script</a> to a local file, and
source it from ~/.bashrc. Refer <a class="reference external" href="https://click.palletsprojects.com/en/8.0.x/shell-completion/#enabling-completion">Click documentation</a> for a long explanation.</p>
<p>After enabling shell completion, press &lt;TAB&gt; twice for shell completion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site &lt;TAB&gt;&lt;TAB&gt;
env              list             save-config      show             show-project-id
</pre></div>
</div>
</section>
<section id="fedcloud-help-command">
<h2>fedcloud --help command<a class="headerlink" href="#fedcloud-help-command" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><strong>&quot;fedcloud --help&quot;</strong> command will print help message. When using it in combination with other
commands, e.g. <strong>&quot;fedcloud token --help&quot;</strong>, <strong>&quot;fedcloud token check --hep&quot;</strong>, it will print list of options for the
corresponding commands</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud --help
Usage: fedcloud [OPTIONS] COMMAND [ARGS]...

Options:
  --help  Show this message and exit.

Commands:
  endpoint       Endpoint command group for interaction with GOCDB and endpoints
  openstack      Executing OpenStack commands on site and VO
  openstack-int  Interactive OpenStack client on site and VO
  site           Site command group for manipulation with site configurations
  token          Token command group for manipulation with tokens
</pre></div>
</div>
</section>
<section id="fedcloud-token-commands">
<h2>fedcloud token commands<a class="headerlink" href="#fedcloud-token-commands" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><strong>&quot;fedcloud token check --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong>: Check the expiration time of access token, so users can know whether
they need to refresh it. As mentioned before, access token may be given via environment variable <em>OIDC_ACCESS_TOKEN</em>,
so the option <em>--oidc-access-token</em> is not shown in all examples bellows, even if the option is required.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud token check
Access token is valid to 2021-01-02 01:25:39 UTC
Access token expires in 3571 seconds
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud token list-vos --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong> : Print the list of VO memberships according to the EGI Check-in</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud token list-vos
eosc-synergy.eu
fedcloud.egi.eu
training.egi.eu
</pre></div>
</div>
</section>
<section id="fedcloud-endpoint-commands">
<h2>fedcloud endpoint commands<a class="headerlink" href="#fedcloud-endpoint-commands" title="Permalink to this headline"></a></h2>
<p><strong>&quot;fedcloud endpoint&quot;</strong> commands are complementary part of the <strong>&quot;fedcloud site&quot;</strong> commands. Instead of using site
configurations defined in files saved in GitHub repository or local disk, the commands try to get site information
directly from GOCDB (Grid Operations Configuration Management Database) <a class="reference external" href="https://goc.egi.eu/">https://goc.egi.eu/</a> or make probe test on sites</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud endpoint list&quot;</strong> : List of endpoints of sites defined in GOCDB.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint list
Site                type                URL
------------------  ------------------  ------------------------------------------------
IFCA-LCG2           org.openstack.nova  https://api.cloud.ifca.es:5000/v3/
IN2P3-IRES          org.openstack.nova  https://sbgcloud.in2p3.fr:5000/v3
...
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud endpoint projects --site &lt;SITE&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong> : List of projects that the owner
of the access token can have access on the given site</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint projects --site IFCA-LCG2
id                                Name                        enabled    site
--------------------------------  --------------------------  ---------  ---------
2a7e2cd4b6dc4e609dd934964c1715c6  VO:demo.fedcloud.egi.eu     True       IFCA-LCG2
3b9754ad8c6046b4aec43ec21abe7d8c  VO:eosc-synergy.eu          True       IFCA-LCG2
...
</pre></div>
</div>
<p>If the site is <em>ALL_SITES</em>, the command will show projects on all sites in EGI Federated Cloud.</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud endpoint token --site &lt;SITE&gt; --project-id &lt;PROJECT&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong> : Get
OpenStack keystone scoped token on the site for the project ID.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint token --site IFCA-LCG2 --project-id 3b9754ad8c6046b4aec43ec21abe7d8c
export OS_TOKEN=&quot;gAAAAA...&quot;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud endpoint env --site &lt;SITE&gt; --project-id &lt;PROJECT&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong> : Print
environment variables for working with the project ID on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud endpoint env --site IFCA-LCG2 --project-id 3b9754ad8c6046b4aec43ec21abe7d8c
# environment for IFCA-LCG2
export OS_AUTH_URL=&quot;https://api.cloud.ifca.es:5000/v3/&quot;
export OS_AUTH_TYPE=&quot;v3oidcaccesstoken&quot;
export OS_IDENTITY_PROVIDER=&quot;egi.eu&quot;
export OS_PROTOCOL=&quot;openid&quot;
export OS_ACCESS_TOKEN=&quot;...&quot;
</pre></div>
</div>
</section>
<section id="fedcloud-ec3-commands">
<h2>fedcloud ec3 commands<a class="headerlink" href="#fedcloud-ec3-commands" title="Permalink to this headline"></a></h2>
<p><strong>&quot;fedcloud ec3&quot;</strong> commands are helper commands for deploying EC3 (Elastic Cloud Compute Cluster) in Cloud
via Infrastructure Manager. The commands will create necessary template and authorization files for EC3 client.</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud ec3 init --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; --auth-file auth.dat --template-dir
./templates&quot;</strong> : Generate authorization file (by default <em>auth.dat</em>) and template file (by default
<em>./templates/refresh.radl</em>) for EC3 client.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud ec3 init --site CESGA --vo vo.access.egi.eu
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud ec3 refresh --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; --auth-file auth.dat&quot;</strong> :
Refresh the access token stored in authorization file (by default <em>auth.dat</em>).</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud ec3 init --site CESGA --vo vo.access.egi.eu
</pre></div>
</div>
</section>
<section id="fedcloud-site-commands">
<h2>fedcloud site commands<a class="headerlink" href="#fedcloud-site-commands" title="Permalink to this headline"></a></h2>
<p><strong>&quot;fedcloud site&quot;</strong> commands will read site configurations and manipulate with them. If the local site configurations
exist at <em>~/.config/fedcloud/site-config/</em>, <strong>fedcloud</strong> will read them from there, otherwise the commands will read
from <a class="reference external" href="https://github.com/EGI-Foundation/fedcloud-catchall-operations/tree/master/sites">GitHub repository</a>.</p>
<p>By default, <strong>fedcloud</strong> does not save anything on local disk, users have to save the site configuration to local disk
explicitly via <strong>&quot;fedcloud site save-config&quot;</strong> command. The advantage of having local
site configurations, beside faster loading, is to give users ability to make customizations, e.g. add additional VOs,
remove sites they do not have access, and so on.</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud site save-config&quot;</strong> : Read the default site configurations from GitHub
and save them to <em>~/.config/fedcloud/site-config/</em> local directory. The command will overwrite existing site configurations
in the local directory.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site save-config
Saving site configs to directory /home/viet/.config/fedcloud/site-config/
</pre></div>
</div>
<p>After saving site configurations, users can edit and customize them, e.g. remove inaccessible sites, add new
VOs and so on.</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud site list&quot;</strong> : List of existing sites in the site configurations</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site list
100IT
BIFI
CESGA
...
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud site show --site &lt;SITE&gt;&quot;</strong> : Show configuration of the corresponding site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site show --site IISAS-FedCloud
endpoint: https://cloud.ui.savba.sk:5000/v3/
gocdb: IISAS-FedCloud
vos:
- auth:
    project_id: a22bbffb007745b2934bf308b0a4d186
  name: covid19.eosc-synergy.eu
- auth:
    project_id: 51f736d36ce34b9ebdf196cfcabd24ee
  name: eosc-synergy.eu
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud site show-project-id --site &lt;SITE&gt; --vo &lt;VO&gt;&quot;</strong>: show the project ID of the VO on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site show-project-id --site IISAS-FedCloud --vo eosc-synergy.eu
export OS_AUTH_URL=&quot;https://cloud.ui.savba.sk:5000/v3/&quot;
export OS_PROJECT_ID=&quot;51f736d36ce34b9ebdf196cfcabd24ee&quot;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud site env --site &lt;SITE&gt; --vo &lt;VO&gt;&quot;</strong>: set OpenStack environment variable for the VO on the site.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud site env --site IISAS-FedCloud --vo eosc-synergy.eu
export OS_AUTH_URL=&quot;https://cloud.ui.savba.sk:5000/v3/&quot;
export OS_AUTH_TYPE=&quot;v3oidcaccesstoken&quot;
export OS_IDENTITY_PROVIDER=&quot;egi.eu&quot;
export OS_PROTOCOL=&quot;openid&quot;
export OS_PROJECT_ID=&quot;51f736d36ce34b9ebdf196cfcabd24ee&quot;
# Remember to set OS_ACCESS_TOKEN, e.g. :
# export OS_ACCESS_TOKEN=`oidc-token egi`
</pre></div>
</div>
<p>The main differences between <em>&quot;fedcloud endpoint env&quot;</em> and <em>&quot;fedcloud site env&quot;</em> commands are that the second command
needs VO name as input parameter instead of project ID. The command may set also environment variable OS_ACCESS_TOKEN,
if access token is provided, otherwise it will print notification.</p>
</section>
<section id="fedcloud-select-commands">
<h2>fedcloud select commands<a class="headerlink" href="#fedcloud-select-commands" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><strong>&quot;fedcloud select flavor --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; --flavor-specs &lt;flavor-specs&gt;&quot;</strong> :
Select flavor according to the specification in <em>flavor-specs</em>. The specifications may be repeated,
e.g. <em>--flavor-specs &quot;VCPUs==2&quot; --flavor-specs &quot;RAM&gt;=2048&quot;</em>, or may be joined, e.g.
<em>--flavor-specs &quot;VCPUs==2 &amp; Disk&gt;10&quot;</em>. For frequently used specs, short-option alternatives are available, e.g.
<em>--vcpus 2</em> is equivalent to <em>--flavor-specs &quot;VCPUs==2&quot;</em>. The output is sorted, flavors using less resources
(in the order: GPUs, CPUs, RAM, Disk) are placed on the first places. Users can choose to print only the best-matched
flavor with <em>--output-format first</em> (suitable for scripting) or the full list of all matched flavors in list/YAML/JSON
format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select flavor --site IISAS-FedCloud --vo vo.access.egi.eu --flavor-specs &quot;RAM&gt;=2096&quot; --flavor-specs &quot;Disk &gt; 10&quot; --output-format list
m1.medium
m1.large
m1.xlarge
m1.huge
g1.c08r30-K20m
g1.c16r60-2xK20m
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud select image --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; --image-specs &lt;image-specs&gt;&quot;</strong> :
Select image according to the specification in <em>image-specs</em>. The specifications may be repeated,
e.g. <em>--image-specs &quot;Name=~Ubuntu&quot; --image-specs &quot;Name=~'20.04'&quot;</em>. The output is sorted, newest images
are placed on the first places. Users can choose to print only the best-matched
image with <em>--output-format first</em> (suitable for scripting) or the full list of all matched images in list/YAML/JSON
format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select image --site INFN-CATANIA-STACK --vo training.egi.eu --image-specs &quot;Name =~ Ubuntu&quot; --output-format list
TRAINING.EGI.EU Image for EGI Docker [Ubuntu/18.04/VirtualBox]
TRAINING.EGI.EU Image for EGI Ubuntu 20.04 [Ubuntu/20.04/VirtualBox]
</pre></div>
</div>
<ul class="simple">
<li><p><strong>&quot;fedcloud select network --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; --network-specs &lt;flavor-specs&gt;&quot;</strong> :
Select network according to the specification in <em>network-specs</em>. User can choose to select only public or private
network, or both (default). The output is sorted in the order: public, shared,
private. Users can choose to print only the best-matched network with <em>--output-format first</em>
(suitable for scripting) or the full list of all matched networks in list/YAML/JSON format.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud select network --site IISAS-FedCloud --vo training.egi.eu --network-specs default --output-format list
public-network
private-network
</pre></div>
</div>
</section>
<section id="fedcloud-openstack-commands">
<h2>fedcloud openstack commands<a class="headerlink" href="#fedcloud-openstack-commands" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><strong>&quot;fedcloud openstack --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt; &lt;OPENSTACK_COMMAND&gt;&quot;</strong> : Execute an
OpenStack command on the site and VO. Examples of OpenStack commands are <em>&quot;image list&quot;</em>, <em>&quot;server list&quot;</em> and can be used
with additional options for the commands, e.g. <em>&quot;image list --long&quot;</em>, <em>&quot;server list --format json&quot;</em>. The list of all
OpenStack commands, and their parameters/usages are available
<a class="reference external" href="https://docs.openstack.org/python-openstackclient/latest/cli/command-list.html">here</a>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud openstack image list --site IISAS-FedCloud --vo eosc-synergy.eu
Site: IISAS-FedCloud, VO: eosc-synergy.eu
+--------------------------------------+-------------------------------------------------+--------+
| ID                                   | Name                                            | Status |
+--------------------------------------+-------------------------------------------------+--------+
| 862d4ede-6a11-4227-8388-c94141a5dace | Image for EGI CentOS 7 [CentOS/7/VirtualBox]    | active |
...
</pre></div>
</div>
<p>If the site is <em>ALL_SITES</em>, the OpenStack command will be executed on all sites in EGI Federated Cloud.</p>
<ul class="simple">
<li><p><strong>&quot;fedcloud openstack-int --site &lt;SITE&gt; --vo &lt;VO&gt; --oidc-access-token &lt;ACCESS_TOKEN&gt;&quot;</strong> : Call OpenStack client without
command, so users can work with OpenStack site in interactive mode. This is useful when users need to perform multiple
commands successively. For example, users may need get list of images, list of flavors, list of networks before
creating a VM. OIDC authentication is done only once at the beginning, then the keystone token is cached and will
be used for successive commands without authentication via CheckIn again.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fedcloud openstack-int --site IISAS-FedCloud --vo eosc-synergy.eu
(openstack) image list
+--------------------------------------+-------------------------------------------------+--------+
| ID                                   | Name                                            | Status |
+--------------------------------------+-------------------------------------------------+--------+
| 862d4ede-6a11-4227-8388-c94141a5dace | Image for EGI CentOS 7 [CentOS/7/VirtualBox]    | active |
...
(openstack) flavor list
+--------------------------------------+-----------+-------+------+-----------+-------+-----------+
| ID                                   | Name      |   RAM | Disk | Ephemeral | VCPUs | Is Public |
+--------------------------------------+-----------+-------+------+-----------+-------+-----------+
| 5bd8397c-b97f-462d-9d2b-5b533844996c | m1.small  |  2048 |   10 |         0 |     1 | True      |
| df25f80f-ed19-4e0b-805e-d34620ba0334 | m1.medium |  4096 |   40 |         0 |     2 | True      |
...
(openstack)
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="development.html" class="btn btn-neutral float-right" title="Using fedcloudclient in Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Viet Tran.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>